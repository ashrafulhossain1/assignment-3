(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[19],{2091:function(e,t,n){"use strict";var a=n(1),r=n(31),o=n(34),i=function(e){return{type:"SET_THEATER_MODE",payload:e}};t.a=function(){var e=Object(r.d)((function(e){return e.theaterMode})),t=Object(r.d)((function(e){return e.load})),n=Object(r.c)(),c=Object(o.useLocation)();Object(a.useEffect)((function(){n(i(localStorage.getItem("theaterMode")))}),[]);var u=Object(a.useCallback)((function(t){n(i(t||("on"===e?"off":"on")))}),[e]);return Object(a.useEffect)((function(){var n;"on"===e&&(null===(n=c.pathname)||void 0===n?void 0:n.includes("/video/"))&&t?(window&&window.scrollTo(0,0),window.setTimeout((function(){window&&window.scrollTo(0,150)}),1),window.setTimeout((function(){window&&window.scrollTo(0,152)}),500)):window&&window.scrollTo(0,0)}),[e,t]),Object(a.useEffect)((function(){e&&localStorage.setItem("theaterMode",e)}),[e,n]),{theaterMode:e,toggleTheaterMode:u,setTheaterMode:i}}},2382:function(e,t,n){e.exports=n.p+"static/media/theater-mode.c6c07530.svg"},2384:function(e,t,n){e.exports=n.p+"static/media/error-customize.17fef4a8.png"},2385:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var a=n(21),r=n.n(a),o=n(35),i=function(){var e=Object(o.a)(r.a.mark((function e(){var t,n,a,o,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.42E01E"'}]}],n={Widevine:{name:"Widevine",mediaKey:"com.widevine.alpha"},PlayReady:{name:"PlayReady",mediaKey:"com.microsoft.playready"},FairPlay:{name:"FairPlay",mediaKey:"com.apple.fps"}},a="",o=r.a.mark((function e(o){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.requestMediaKeySystemAccess(n[o].mediaKey,t).then((function(e){a=n[o].name,console.log(a+" support ok")})).catch((function(e){console.log(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),e.t0=r.a.keys(n);case 5:if((e.t1=e.t0()).done){e.next=10;break}return i=e.t1.value,e.delegateYield(o(i),"t2",8);case 8:e.next=5;break;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.appName;return"Microsoft Internet Explorer"===n||t.indexOf("trident")>-1||t.indexOf("edge/")>-1?(e="ie","Microsoft Internet Explorer"===n?t=/msie ([0-9]{1,}[\.0-9]{0,})/.exec(t):t.indexOf("edge/")>-1&&(e="Edge")):t.indexOf("safari")>-1?e=t.indexOf("opr")>-1?"Opera":t.indexOf("whale")>-1?"Whale":t.indexOf("edg/")>-1||t.indexOf("Edge/")>-1?"Edge":t.indexOf("chrome")>-1?"Chrome":"Safari":t.indexOf("firefox")>-1&&(e="firefox"),e}},2477:function(e,t,n){"use strict";var a=n(66),r=n(54),o=n(2060),i=n(2061),c=n(78),u=n(21),s=n.n(u),l=n(35),d=n(24),f=n(10),m=n(1),p=n.n(m),v=n(31),b=(n(2383),n(2358)),h=n.n(b),g=n(61),y=n.n(g),w=n(542),E=n(2489),O=function(e){return p.a.createElement(w.a,{openModal:e.openModal,noCloseIcon:!0,noButton:!0,editMode:!0,customStyle:{backgroundColor:"#212121",border:"none",maxWidth:"885px"}},p.a.createElement(E.a,null))},x=n(2490),j=n(2385),k=n(2382),S=n.n(k),T=(n(2532),n(2533)),_=n.n(T),C=n(2534),M=n.n(C),P=n(2091),R=n(1894);t.a=function(e){var t,n=e.dashUri,u=e.hlsUri,b=e.token,g=e.courseId,w=e.unitId,E=e.isConceptual,k=void 0!==E&&E,T=(e.isPopupOpened,e.showPrevious),C=e.showNext,I=e.handlePreviousUnit,N=e.handleNextUnit,L=(e.isDisabled,Object(m.useRef)(null)),F=Object(m.useRef)(null),A=Object(m.useState)(),B=Object(f.a)(A,2),q=B[0],D=B[1],U=Object(v.d)((function(e){var t;return null===(t=e.user)||void 0===t?void 0:t.data})),W=Object(m.useState)(parseFloat(localStorage.getItem("playerVolume")||.5)),V=Object(f.a)(W,2),z=V[0],K=V[1],Y=Object(m.useState)([]),X=Object(f.a)(Y,2),G=X[0],H=X[1],J=Object(m.useState)(0),Q=Object(f.a)(J,2),Z=Q[0],$=Q[1],ee=Object(m.useRef)(null),te=null===G||void 0===G?void 0:G.reduce((function(e,t){return e+t}),0),ne=Object(m.useState)([0]),ae=Object(f.a)(ne,2),re=ae[0],oe=ae[1],ie=Object(m.useRef)(null),ce=Object(m.useRef)(),ue=Object(m.useRef)(),se=Object(m.useState)({edit:!1}),le=Object(f.a)(se,2),de=le[0],fe=(le[1],Object(m.useState)(!1)),me=Object(f.a)(fe,2),pe=me[0],ve=me[1],be=Object(m.useState)(!0),he=Object(f.a)(be,2),ge=he[0],ye=he[1],we=Object(m.useState)(!0),Ee=Object(f.a)(we,2),Oe=Ee[0],xe=Ee[1],je=Object(m.useState)(0),ke=Object(f.a)(je,2),Se=ke[0],Te=ke[1],_e=null===(t=Object(v.d)((function(e){return e.catchupChallenge})))||void 0===t?void 0:t.challengeReward,Ce=Object(P.a)(),Me=Ce.theaterMode,Pe=Ce.toggleTheaterMode,Re=Object(m.useState)(null),Ie=Object(f.a)(Re,2),Ne=Ie[0],Le=Ie[1],Fe=Object(R.a)("(min-width:768px)"),Ae=function(){ee.current=window.setInterval((function(){H((function(e){return[].concat(Object(d.a)(e),[1])}))}),1e3),De()},Be=function(){ee.current&&clearInterval(ee.current),De()},qe=function(){var e=document.querySelector(".shaka-video-container");if(e){var t=document.createElement("div");t.setAttribute("id","plyr-logo"),ie.current=t;var n=e.getBoundingClientRect(),a=n.width,r=n.height,o=t.getBoundingClientRect(),i=o.width,c=o.height;t.style.display="block",t.style.top="".concat(Math.random()*(r-c),"px"),t.style.left="".concat(Math.random()*(a-i),"px"),t.innerText="".concat(null===U||void 0===U?void 0:U.email),t.style.fontFamily="Inter, sans-serif",t.style.fontWeight="400",t.style.color="red",t.style.position="absolute",t.style.fontSize="12px",t.style.userSelect="none",e.appendChild(t),ce.current=new MutationObserver((function(t){t.forEach((function(t){e.contains(t.target)&&(y()({icon:"error",title:"Couldn't find video parser. Try closing and opening the app again.!",text:"I will reload in 5 seconds",timer:5e3,className:"swal-title-for-shaka-player"}).then((function(){window.location.reload()})),ue.current&&clearInterval(ue.current),ce.current.disconnect())}))})),ce.current.observe(e,{childList:!0}),ue.current=setInterval((function(){var n=e.getBoundingClientRect(),a=n.width,r=n.height,o=t.getBoundingClientRect(),i=o.width,c=o.height;t.style.display="block",t.style.top="".concat(Math.random()*(r-c),"px"),t.style.left="".concat(Math.random()*(a-i),"px"),t.innerText="".concat(U.email),t.style.fontFamily="Inter, sans-serif",t.style.fontWeight="400",t.style.color="red",t.style.position="absolute",t.style.fontSize="12px",t.style.userSelect="none"}),5e3)}else y()({icon:"error",title:"Player error. Player not initialized",text:"I will reload in 5 seconds",timer:5e3,className:"swal-title-for-shaka-player"}).then((function(){window.location.reload()}))},De=function(){var e=parseFloat(localStorage.getItem("playbackSpeed"))||1;F.current.playbackRate&&(F.current.playbackRate=e)},Ue=function(e){e.forEach((function(e){e.isIntersecting?ve(!0):ve(!1)}))},We=function(e){I(e)},Ve=function(e){N(e)};function ze(e){console.error("Error code",e.code,"object",e)}var Ke=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://vtb.axinom.com/FPScert/fairplay.cer");case 2:return t=e.sent,e.next=5,t.arrayBuffer();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Ye(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(l.a)(s.a.mark((function e(t){var c,l,d,f,m,p,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l={},d=new h.a.Player(F.current),f=new h.a.ui.Overlay(d,L.current,F.current),Le(f),m={seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"#ffffff",played:"#0294f9"},controlPanelElements:["play_pause","mute","volume","time_and_duration","spacer","rewind_10","forward_10","theater_mode","fullscreen","overflow_menu"],addBigPlayButton:!1,overflowMenuButtons:["playback_rate","quality"],enableTooltips:!0},h.a.ui.Controls.registerElement("rewind_10",new x.RewindTenButton.Factory),h.a.ui.Controls.registerElement("forward_10",new x.ForwardTenButton.Factory),d.TheaterMode=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e,a){var o;Object(r.a)(this,n),(o=t.call(this,e,a)).theaterModeValue=Me,o.button_=document.createElement("button");var i=document.createElement("img");return i.src=S.a,i.alt="Theater Mode",o.button_.appendChild(i),o.button_.classList.add("shaka-tooltip"),o.button_.ariaLabel="theater mode",o.parent.appendChild(o.button_),o.eventManager.listen(o.button_,"click",(function(){o.theaterModeValue="on"===o.theaterModeValue?"off":"on",Pe(o.theaterModeValue)})),o}return n}(h.a.ui.Element),d.Previous=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e,a){var o;Object(r.a)(this,n),(o=t.call(this,e,a)).button_=document.createElement("button");var i=document.createElement("img");return i.src=_.a,i.alt="Previous",i.style="width:14px",o.button_.style="margin-left:12px",o.button_.classList.add("shaka-tooltip"),o.button_.ariaLabel="previous",o.button_.appendChild(i),o.parent.appendChild(o.button_),o.eventManager.listen(o.button_,"click",(function(e){We(e)})),o}return n}(h.a.ui.Element),d.NextStep=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(e,a){var o;Object(r.a)(this,n),(o=t.call(this,e,a)).button_=document.createElement("button");var i=document.createElement("img");return i.src=M.a,i.alt="Previous",i.style="width:14px",o.button_.classList.add("shaka-tooltip"),o.button_.ariaLabel="next",o.button_.appendChild(i),o.parent.appendChild(o.button_),o.eventManager.listen(o.button_,"click",(function(e){Ve(e)})),o}return n}(h.a.ui.Element),d.TheaterMode.Factory=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"create",value:function(e,t){return new d.TheaterMode(e,t)}}]),e}(),d.Previous.Factory=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"create",value:function(e,t){return new d.Previous(e,t)}}]),e}(),d.NextStep.Factory=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"create",value:function(e,t){return new d.NextStep(e,t)}}]),e}(),h.a.ui.Controls.registerElement("theater_mode",new d.TheaterMode.Factory),h.a.ui.Controls.registerElement("previous",new d.Previous.Factory),h.a.ui.Controls.registerElement("next",new d.NextStep.Factory),(p=document.querySelector(".shaka-forward-ten-button"))&&(console.log("\ud83d\ude80 ~ file: ShakaPlayer.js:267 ~ initPlayer ~ rewind:",p),p.classList.add("shaka-tooltip")),f.configure(m),"Widevine"!==t){e.next=26;break}c=n,l={abr:{enabled:!0,defaultBandwidthEstimate:442e3,bandwidthUpgradeTarget:.7,bandwidthDowngradeTarget:.95},drm:{servers:{"com.widevine.alpha":"https://drm-widevine-licensing.axprod.net/AcquireLicense"},advanced:{"com.widevine.alpha":{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"}}},streaming:{bufferingGoal:120}},d.getNetworkingEngine().registerRequestFilter((function(e,t){e===h.a.net.NetworkingEngine.RequestType.LICENSE&&(t.headers["X-AxDRM-Message"]=b)})),e.next=39;break;case 26:if("PlayReady"!==t){e.next=32;break}c=n,l={abr:{enabled:!0,defaultBandwidthEstimate:442e3,bandwidthUpgradeTarget:.7,bandwidthDowngradeTarget:.95},drm:{servers:{"com.widevine.alpha":"https://drm-widevine-licensing.axprod.net/AcquireLicense","com.microsoft.playready":"https://drm-playready-licensing.axprod.net/AcquireLicense"},advanced:{"com.widevine.alpha":{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"}}}},d.getNetworkingEngine().registerRequestFilter((function(e,t){e===h.a.net.NetworkingEngine.RequestType.LICENSE&&(t.headers["X-AxDRM-Message"]=b)})),e.next=39;break;case 32:if("FairPlay"!==t){e.next=39;break}return c=u,e.next=36,Ke();case 36:v=e.sent,l={abr:{enabled:!0,defaultBandwidthEstimate:442e3,bandwidthUpgradeTarget:.7,bandwidthDowngradeTarget:.95},manifest:{retryParameters:{timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4,maxAttempts:3,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5}},drm:{servers:{"com.apple.fps":"https://drm-fairplay-licensing.axprod.net/AcquireLicense"},advanced:{"com.apple.fps":{serverCertificate:new Uint8Array(v)}},retryParameters:{timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4,maxAttempts:3,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5}},streaming:{bufferingGoal:120,retryParameters:{timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4,maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5}}},d.getNetworkingEngine().registerRequestFilter((function(e,t){e===h.a.net.NetworkingEngine.RequestType.LICENSE&&(t.headers["X-AxDRM-Message"]=b)}));case 39:d.setTextTrackVisibility(!0),d.load(c).then((function(){console.log("The video has now been loaded!")})).catch((function(e){ze(e),console.log(c)})),d.configure(l),D(d);case 43:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.useEffect)((function(){if(Ne){var e=[T&&"previous","play_pause",C&&"next","mute","volume","time_and_duration",Fe&&"spacer","rewind_10","forward_10",Fe&&"theater_mode","fullscreen","overflow_menu"];Ne.configure({controlPanelElements:e})}}),[Fe,C,T,Ne]),Object(m.useEffect)((function(){if(q){var e;F.current.addEventListener("timeupdate",(function(){var e,t,n=parseInt(null===F||void 0===F||null===(e=F.current)||void 0===e?void 0:e.duration);$(n);var a=parseInt(null===(t=F.current)||void 0===t?void 0:t.currentTime);oe((function(e){return[].concat(Object(d.a)(e),[a])}))})),F.current.addEventListener("play",Ae),F.current.addEventListener("pause",Be),F.current.addEventListener("loadeddata",qe),F.current.addEventListener("ratechange",De),localStorage.setItem("playerVolume",z);var t=null===F||void 0===F?void 0:F.current;if(L.current){var n=L.current.querySelector(".shaka-volume-bar"),a=L.current.querySelector(".shaka-volume-bar-container");if(n&&a){var r=z;r>1?r=1:r<0&&(r=0),t.volume=r,n.value=r;var o=100*r;a.style.background="linear-gradient(to right, rgb(255, 255, 255) ".concat(o,"%, rgba(255, 255, 255, 0.54) ").concat(o,"%, rgba(255, 255, 255, 0.54) 100%)")}}if(Oe){var i=parseFloat(localStorage.getItem("storePlayedPosition"));i&&i>0&&t.addEventListener("loadedmetadata",(function(){t.currentTime=i,localStorage.setItem("storePlayedPosition",0)}))}var c=null===(e=document.getElementsByClassName("shaka-playback-rates")[0])||void 0===e?void 0:e.childNodes;c&&c.forEach((function(e,t){e.addEventListener("click",(function(e){if(0!==t){var n=parseFloat(e.target.textContent);a=n,localStorage.setItem("playbackSpeed",a)}var a}))}))}return function(){F.current.removeEventListener("play",Ae),F.current.removeEventListener("pause",Be),F.current.removeEventListener("loadeddata",qe),F.current.removeEventListener("ratechange",De),q&&(ce.current&&ce.current.disconnect(),q.unload().then((function(){})).catch((function(e){console.error("Error unloading player:",e)})))}}),[q]),Object(m.useEffect)((function(){Se>0&&Pe()}),[Se]),Object(m.useEffect)((function(){var e=L.current,t=F.current,n=function(n){var a="INPUT"===document.activeElement.nodeName,r="TEXTAREA"===document.activeElement.nodeName,o=document.activeElement.className;if(!a&&!r&&ge&&pe&&!(null===o||void 0===o?void 0:o.includes("ql-editor")))switch(n.key){case" ":n.preventDefault(),t.paused?t.play():t.pause();break;case"f":document.fullscreenElement?document.exitFullscreen():e.requestFullscreen();break;case"t":Te((function(e){return e+1}));break;case"ArrowUp":K(z+=.1),z>1&&(z=1),t.volume=z,localStorage.setItem("playerVolume",z),n.preventDefault();break;case"ArrowDown":K(z-=.1),z<0&&(z=0),t.volume=z,localStorage.setItem("playerVolume",z),n.preventDefault();break;case"ArrowLeft":t.currentTime-=5;break;case"ArrowRight":t.currentTime+=5}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[pe,ge]),Object(m.useEffect)((function(){var e,t=null===(e=document.getElementsByClassName("rbt-input-main"))||void 0===e?void 0:e[0];if(t){var n=new MutationObserver((function(e){var t,n=Object(c.a)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if("attributes"===a.type&&"class"===a.attributeName){var r=a.target===document.activeElement;ye(!r);break}}}catch(o){n.e(o)}finally{n.f()}}));return n.observe(t,{attributes:!0}),function(){n.disconnect()}}}),[pe]),Object(m.useEffect)((function(){var e=setInterval((function(){k||function(){var e=Math.max.apply(Math,Object(d.a)(re));localStorage.setItem("lastWatchTime",JSON.stringify({unitId:w,totalPlayed:te,totalCovered:e,originalDuration:Z,courseId:g}))}()}),1e3);return function(){clearInterval(e)}}),[te,Z]),Object(m.useEffect)((function(){function e(){if(navigator.onLine)xe(!0);else{var e=Math.max.apply(Math,Object(d.a)(re));localStorage.setItem("storePlayedPosition",String(e)),xe(!1)}}return window.addEventListener("online",e),window.addEventListener("offline",e),function(){document.removeEventListener("online",e),document.removeEventListener("offline",e)}}),[re]),Object(m.useEffect)((function(){h.a.polyfill.installAll(),h.a.Player.isBrowserSupported()?Object(j.b)().then(function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(j.a)(),a="Running in "+n+". "+t+" supported.",console.log(a),e.next=5,Ye(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):(console.error("Browser not supported!"),alert("Browser not supported!"));var e=new IntersectionObserver(Ue,{root:null,rootMargin:"0px",threshold:0});return L.current&&e.observe(L.current),function(){e.disconnect()}}),[]),p.a.createElement(p.a.Fragment,null,p.a.createElement(O,{openModal:de}),p.a.createElement("div",{className:"shaka-player-component",ref:L,style:{width:"100%",maxWidth:"100%"}},p.a.createElement("video",{disablePictureInPicture:!0,disableRemotePlayback:!0,controls:!1,playsInline:!0,autoPlay:!(null===_e||void 0===_e?void 0:_e.edit),ref:F,onVolumeChange:function(e){var t=e.target.volume.toFixed(2);localStorage.setItem("playerVolume",t)},style:{maxWidth:"100%",width:"100%"}})))}},2489:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(34),i=n(2384),c=n.n(i);t.a=function(){var e=Object(o.useHistory)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"shaka-player-aleart-component text-center"},r.a.createElement("div",{style:{borderBottom:"1px dashed rgba(255, 255, 255, 0.2)"},className:"mb-3"},r.a.createElement("img",{src:c.a,alt:"error",className:"img-fluid"}),r.a.createElement("div",{className:"header mt-2"},r.a.createElement("h3",null,"Oooops !"),r.a.createElement("p",null,"Browser Not Supported"))),r.a.createElement("div",{className:"body"},r.a.createElement("p",{className:"px-3"},"This browser does not support video technology. Use ","",r.a.createElement("span",{className:"text-highlight",onClick:function(){window.open("https://www.google.com/chrome/","_blank","noopener noreferrer")}},"Google's Chrome")," ","browser to access lessons non-stop."),r.a.createElement("button",{onClick:function(){return e.push("/dashboard")},className:"btn btn-primary text-white mt-2"},"Return To Home"))))}},2532:function(e,t,n){e.exports=n.p+"static/media/theaterMode-expand.0f21abcc.svg"},2533:function(e,t,n){e.exports=n.p+"static/media/backward-step.bba308f8.svg"},2534:function(e,t,n){e.exports=n.p+"static/media/forward-step.55039a30.svg"}}]);